{% extends "common/home.html" %}
{% load static %}

{% block title %}Client Editing{% endblock %}

{% block content %}

{% if client and client.id %}
<form method="post" action="{% url 'client_edit' client.id %}">
  {% csrf_token %}

  <div class="form-group row">
    <label class="col-sm-2">Id:</label>
    <div class="col-sm-10">
      <input class="form-control" type="number" name="id" value="{{ client.id }}" readonly>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">Chat id:</label>
    <div class="col-sm-10">
      <input class="form-control" type="text" name="chatId" value="{{ client.chatId }}" readonly>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">Name:</label>
    <div class="col-sm-10">
      <input class="form-control" name="name" value="{{ client.name }}" required>
      {% if nameError %}
      <div class="text-warning">{{ nameError }}</div>
      {% endif %}
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">CPF:</label>
    <div class="col-sm-10">
      <input class="form-control" name="cpf" value="{{ client.cpf }}" required>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">Phone number:</label>
    <div class="col-sm-10">
      <input class="form-control" name="phoneNumber" value="{{ client.phone_number }}" required>
      {% if phoneNumberError %}
      <div class="text-warning">{{ phoneNumberError }}</div>
      {% endif %}
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">City:</label>
    <div class="col-sm-10">
      <input class="form-control" name="city" value="{{ client.city }}" required>
      {% if cityError %}
      <div class="text-warning">{{ cityError }}</div>
      {% endif %}
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">Address:</label>
    <div class="col-sm-10">
      <input class="form-control" name="address" value="{{ client.address }}" required>
      {% if addressError %}
      <div class="text-warning">{{ addressError }}</div>
      {% endif %}
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2">Active:</label>
    <div class="col-sm-10">
      <select class="form-control" name="is_active">
        <option value="1" {% if client.is_active %}selected{% endif %}>Yes</option>
        <option value="0" {% if not client.is_active %}selected{% endif %}>No</option>
      </select>
    </div>
  </div>

  <button class="btn btn-success" type="submit">Update</button>
</form>

<form method="get" action="{% url 'clients_list' %}">
  <button class="btn btn-info" type="submit">Back</button>
</form>

{% else %}
<div class="alert alert-danger" role="alert">
  <h4 class="alert-heading">Error</h4>
  <hr>This client does not exist!
</div>
{% endif %}

{% endblock %}